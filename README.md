# AD Portal

**AD Portal** โ ะฒะตะฑ-ะฟะพััะฐะป ะดะปั ะธะฝััะฐััััะบัััั **Active Directory**, ะฟัะตะดะฝะฐะทะฝะฐัะตะฝะฝัะน ะดะปั ัะฟัะฐะฒะพัะฝัั ะทะฐะดะฐั ะธ ะบะพะฝััะพะปั ะดะพัััะฟะฐ.

[![License](https://img.shields.io/github/license/lonelywolf1981/ad-portal)](LICENSE)
[![Issues](https://img.shields.io/github/issues/lonelywolf1981/ad-portal)](issues)
[![Stars](https://img.shields.io/github/stars/lonelywolf1981/ad-portal)](stargazers)
[![Forks](https://img.shields.io/github/forks/lonelywolf1981/ad-portal)](network)

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะะฟะธัะฐะฝะธะต](#-ะพะฟะธัะฐะฝะธะต)
- [ะะพะทะผะพะถะฝะพััะธ](#-ะฒะพะทะผะพะถะฝะพััะธ)
- [ะขะตัะฝะพะปะพะณะธะธ](#-ัะตัะฝะพะปะพะณะธะธ)
- [ะฃััะฐะฝะพะฒะบะฐ](#-ัััะฐะฝะพะฒะบะฐ)
- [ะะพะฝัะธะณััะฐัะธั](#-ะบะพะฝัะธะณััะฐัะธั)
- [ะัะฟะพะปัะทะพะฒะฐะฝะธะต](#-ะธัะฟะพะปัะทะพะฒะฐะฝะธะต)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#-ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะะบะปะฐะด ะฒ ัะฐะทะฒะธัะธะต](#-ะฒะบะปะฐะด-ะฒ-ัะฐะทะฒะธัะธะต)
- [ะะธัะตะฝะทะธั](#-ะปะธัะตะฝะทะธั)

## ๐ก ะะฟะธัะฐะฝะธะต

AD Portal โ ััะพ ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต, ะบะพัะพัะพะต ะฟัะตะดะพััะฐะฒะปัะตั ัะดะพะฑะฝัะน ะธะฝัะตััะตะนั ะดะปั ัะฐะฑะพัั ั Active Directory. ะัะธะปะพะถะตะฝะธะต ะฟะพะทะฒะพะปัะตั ะธัะบะฐัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน, ะพะฟัะตะดะตะปััั, ะบัะพ ะทะฐะปะพะณะธะฝะตะฝ ะฝะฐ ัะพััะต, ะธ ะฟัะพะฒะพะดะธัั ัะพะฝะพะฒะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ัะตัะธ ะดะปั ะพััะปะตะถะธะฒะฐะฝะธั ะผะตััะพะฟะพะปะพะถะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

## โจ ะะพะทะผะพะถะฝะพััะธ

### ะััะตะฝัะธัะธะบะฐัะธั ะธ ะดะพัััะฟ
- **LOCAL**: ะปะพะบะฐะปัะฝัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะฟัะธะปะพะถะตะฝะธั (SQLite).
- **AD**: ะฒัะพะด ัะตัะตะท Active Directory (LDAP/LDAPS).
- **ะะฐะทะดะตะปัะฝัะต ะณััะฟะฟั ะดะพัััะฟะฐ**:
  - ะบัะพ ะผะพะถะตั ะฒัะพะดะธัั ะฒ ะฟัะธะปะพะถะตะฝะธะต;
  - ะบัะพ ะผะพะถะตั ะพัะบััะฒะฐัั ัััะฐะฝะธัั ยซะะฐัััะพะนะบะธยป.
- **Breakโglass**: ะปะพะบะฐะปัะฝัะน ะฐะดะผะธะฝะธัััะฐัะพั ะผะพะถะตั ะฒัะพะดะธัั ะดะฐะถะต ะฟัะธ ะฒะบะปัััะฝะฝะพะผ ัะตะถะธะผะต AD (ััะพะฑั ะฝะต ะฟะพัะตัััั ะดะพัััะฟ ะบ ะฝะฐัััะพะนะบะฐะผ).

### ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ AD
- ะะพะธัะบ ะฟะพ ัะฐััะธ **ะธะผะตะฝะธ / ัะฐะผะธะปะธะธ / ะปะพะณะธะฝะฐ**.
- ะัะฒะพะด ะฒ ะบัะฐัะบะพะผ ะฒะธะดะต: **ะคะะ, ะปะพะณะธะฝ, eโmail**.
- ะ ะบะฐััะพัะบะต ะฟะพะปัะทะพะฒะฐัะตะปั โ ะฟะตัะตะบะปััะฐัะตะปั **ยซะะพะดัะพะฑะฝะตะตยป**:
  - ะฟะพะบะฐะทัะฒะฐะตััั ัะฐััะธัะตะฝะฝะฐั ะธะฝัะพัะผะฐัะธั ะธะท AD;
  - **ะฟััััะต ะฟะพะปั ะฝะต ะฒัะฒะพะดัััั**;
  - ะณััะฟะฟั ะพัะพะฑัะฐะถะฐัััั ยซัะตะปะพะฒะตะบะพโัะดะพะฑะฝะพยป (ะบะพัะพัะบะธะผะธ ะธะผะตะฝะฐะผะธ).

### ะฃะฟัะฐะฒะปะตะฝะธะต AD (ะฝะพะฒะฐั ััะฝะบัะธั)
- **ะกะพะทะดะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน**: ะฟะพัะฐะณะพะฒัะน ะผะฐััะตั ัะพะทะดะฐะฝะธั ะฝะพะฒัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ั ะฒัะฑะพัะพะผ OU ะธ ัะฐะฑะปะพะฝะพะฒ
- **ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน**: ะธะทะผะตะฝะตะฝะธะต ะฐััะธะฑััะพะฒ, ัะฑัะพั/ัััะฐะฝะพะฒะบะฐ ะฟะฐัะพะปะตะน, ะฑะปะพะบะธัะพะฒะบะฐ/ัะฐะทะฑะปะพะบะธัะพะฒะบะฐ ะฐะบะบะฐัะฝัะพะฒ
- **ะฃะฟัะฐะฒะปะตะฝะธะต ะณััะฟะฟะฐะผะธ**: ะฟัะพัะผะพัั, ัะพะทะดะฐะฝะธะต, ัะดะฐะปะตะฝะธะต ะณััะฟะฟ, ะดะพะฑะฐะฒะปะตะฝะธะต/ัะดะฐะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธะท ะณััะฟะฟ
- **ะกะพะทะดะฐะฝะธะต ะณััะฟะฟ**: ะฒะพะทะผะพะถะฝะพััั ัะพะทะดะฐะฒะฐัั ะฝะพะฒัะต ะณััะฟะฟั ั ัะฐะทะปะธัะฝัะผะธ ะฝะฐัััะพะนะบะฐะผะธ (global/domain local/universal, security/distribution)
- **ะะพะธัะบ ะธ ัะพะฟะพััะฐะฒะปะตะฝะธะต**: ะฑัััััะน ะฟะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ะณััะฟะฟ ะดะปั ะดะพะฑะฐะฒะปะตะฝะธั ะฒ ะดััะณะธะต ะณััะฟะฟั
- **ะัะดะธั ะพะฟะตัะฐัะธะน**: ะฒัะต ะพะฟะตัะฐัะธะธ ัะฟัะฐะฒะปะตะฝะธั AD ะปะพะณะธัััััั ะดะปั ะฐัะดะธัะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ

### ะัะพ ะทะฐะปะพะณะธะฝะตะฝ ะฝะฐ ัะพััะต (WinRM/WMI/SMB)
- ะะพ ะฒะฒะตะดัะฝะฝะพะผั **hostname** (ะฝะฐะฟัะธะผะตั, `prod-00835`) ะธะปะธ **IP** ะพะฟัะตะดะตะปัะตััั, ะบัะพ ะทะฐะปะพะณะธะฝะตะฝ ะฝะฐ ัะดะฐะปัะฝะฝะพะน Windowsโะผะฐัะธะฝะต.
- ะัะปะธ ะฒะฒะตะดะตะฝะพ ะบะพัะพัะบะพะต ะธะผั ัะพััะฐ ะธ ะฒ ะฝะฐัััะพะนะบะฐั ะทะฐะดะฐะฝ ะดะพะผะตะฝ, ะฟัะพะฑััััั ัะตะปะธ:
  1) `hostname.<ad_domain>`
  2) `hostname`
- ะะตัะพะดั ะฟะตัะตะฑะธัะฐัััั **ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ** ะดะพ ะฟะตัะฒะพะณะพ ัะตะทัะปััะฐัะฐ:
  1) **WinRM**
  2) **WMI/DCOM**
  3) **SMB/RPC**
- ะะฐ **ะบะฐะถะดัะน ะผะตัะพะด** ะดะตะนััะฒัะตั ัะฐะนะผะฐัั (ะฝะฐัััะฐะธะฒะฐะตััั ะฒ ยซะะฐัััะพะนะบะฐัยป). ะัะปะธ ะผะตัะพะด ะฝะต ะดะฐะป ะพัะฒะตั ะทะฐ ัะฐะนะผะฐัั โ ััะธัะฐะตััั ะฝะตััะฟะตัะฝัะผ ะธ ะทะฐะฟััะบะฐะตััั ัะปะตะดัััะธะน.
- ะ UI ะดะพัััะฟะฝะฐ ะบะฝะพะฟะบะฐ **ยซะะพะดัะพะฑะฝะพััะธยป** (ัะฐะฑะปะธัะฐ ััะฐัััะพะฒ ะฟะพะฟััะพะบ: ok/empty/timeout/error).

### ะคะพะฝะพะฒะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ัะตัะธ (ะฟะพัะปะตะดะฝะธะน ัะพัั ะฟะพะปัะทะพะฒะฐัะตะปั)

ะะพะฟะพะปะฝะธัะตะปัะฝะพ ัะตะฐะปะธะทะพะฒะฐะฝะพ ะฟะตัะธะพะดะธัะตัะบะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ะทะฐะดะฐะฝะฝัั **CIDRโะดะธะฐะฟะฐะทะพะฝะพะฒ**, ััะพะฑั ะฟะพะปััะธัั ะพัะฒะตั:
**ยซะฝะฐ ะบะฐะบะพะผ ัะพััะต ะฑัะป ะฝะฐะนะดะตะฝ ะฟะพะปัะทะพะฒะฐัะตะปัยป**.

ะะฐะบ ััะพ ัะฐะฑะพัะฐะตั:
- ะ **ะะฐัััะพะนะบะฐั** ะฒะบะปััะฐะตัะต ะฑะปะพะบ **ยซะคะพะฝะพะฒะพะต ัะบะฐะฝะธัะพะฒะฐะฝะธะต ัะตัะธ (ะฟะพัะปะตะดะฝะธะน ัะพัั)ยป**.
- ะฃะบะฐะทัะฒะฐะตัะต **ะธะฝัะตัะฒะฐะป** (ะฝะฐะฟัะธะผะตั, 120 ะผะธะฝัั) ะธ ัะฟะธัะพะบ **CIDR** (ะฟะพ ะพะดะฝะพะผั ะฒ ัััะพะบะต).
- ะกะบะฐะฝะธัะพะฒะฐะฝะธะต ะฒัะฟะพะปะฝัะตััั ะฒ ัะพะฝะต (Celery Beat โ Celery Worker).
- ะัะธ ะฟะพะธัะบะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะฒ AD ะธั ะบะฐััะพัะบะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะดะพะฟะพะปะฝััััั ะฟะพะปะตะผ **ยซะะฐะนะดะตะฝ ะฝะฐ: HOST / IPยป** (ะตัะปะธ ะดะปั ััะพะณะพ ะปะพะณะธะฝะฐ ะตััั ะดะฐะฝะฝัะต ะฒ ะฑะฐะทะต).

ะะฟัะธะผะธะทะฐัะธะธ:
- ะะปั ะบะฐะถะดะพะณะพ IP ะดะตะปะฐะตััั ะฑััััะฐั **ะฟัะพะฑะฐ ะฟะพััะพะฒ** (445/5985/5986/135) ะธ ะฝะตโWindows ัะพััั ะฟัะพะฟััะบะฐัััั.
- ะััะฐะตััั ะฟะพะปััะธัั **hostname** ะฟะพ reverse DNS ะธ ัะพััะฐะฝัะตั **hostname + IP**.

ะะณัะฐะฝะธัะตะฝะธั:
- ะ ัะฐะฑะปะธัะต ััะฐะฝะธััั **ะฟะพัะปะตะดะฝะธะน** ะฝะฐะนะดะตะฝะฝัะน ัะพัั ะดะปั ะปะพะณะธะฝะฐ (ะตัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะฐะนะดะตะฝ ะฝะฐ ะฝะตัะบะพะปัะบะธั ัะพััะฐั, ะพััะฐะฝะตััั ะฟะพัะปะตะดะฝะตะต ะพะฑะฝะพะฒะปะตะฝะธะต).
- ะขะพัะฝะพััั ะทะฐะฒะธัะธั ะพั ะฟัะฐะฒ ััะตัะฝะพะน ะทะฐะฟะธัะธ, ัะบะฐะทะฐะฝะฝะพะน ะฒ ยซะัะพ ะทะฐะปะพะณะธะฝะตะฝ ะฝะฐ ัะพััะตยป.

### ะกะพะฟะพััะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ัะพััะพะฒ (ะฝะพะฒะฐั ััะฝะบัะธั)
- **ะะบะปะฐะดะบะฐ "ะกะพะฟะพััะฐะฒะปะตะฝะธั"**: ะพัะพะฑัะฐะถะตะฝะธะต ัะพะฟะพััะฐะฒะปะตะฝะธะน ะผะตะถะดั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะธ ัะพััะฐะผะธ, ะฝะฐะนะดะตะฝะฝัะผะธ ะฟัะธ ัะบะฐะฝะธัะพะฒะฐะฝะธะธ
- **ะะพะธัะบ ะธ ัะธะปัััะฐัะธั**: ะฒะพะทะผะพะถะฝะพััั ะฟะพะธัะบะฐ ัะพะฟะพััะฐะฒะปะตะฝะธะน ะฟะพ ะธะผะตะฝะธ ัะพััะฐ, IP, ะปะพะณะธะฝั ะฟะพะปัะทะพะฒะฐัะตะปั
- **ะกะพััะธัะพะฒะบะฐ**: ัะพััะธัะพะฒะบะฐ ัะตะทัะปััะฐัะพะฒ ะฟะพ ัะฐะทะปะธัะฝัะผ ะบัะธัะตัะธัะผ (ัะพัั, IP, ะปะพะณะธะฝ, ะฒัะตะผั ะพะฑะฝะฐััะถะตะฝะธั)
- **ะญะบัะฟะพัั ะดะฐะฝะฝัั**: ัะบัะฟะพัั ัะพะฟะพััะฐะฒะปะตะฝะธะน ะฒ ัะพัะผะฐั Excel ะดะปั ะฐะฝะฐะปะธะทะฐ
- **ะกัะฐัะธััะธะบะฐ ัะบะฐะฝะธัะพะฒะฐะฝะธั**: ะณัะฐัะธะบะธ ะธ ััะฐัะธััะธะบะฐ ะธััะพัะธะธ ัะบะฐะฝะธัะพะฒะฐะฝะธั ัะตัะธ

### ะะฝัะตะณัะฐัะธั ั IP-ัะตะปะตัะพะฝะฐะผะธ (ะฝะพะฒะฐั ััะฝะบัะธั)
- **ะะฝัะตะณัะฐัะธั ั Asterisk**: ะฟะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ะดะพัััะฟะฝัั SIP-ััััะพะนััะฒะฐั ัะตัะตะท AMI-ะธะฝัะตััะตะนั
- **ะกะพะฟะพััะฐะฒะปะตะฝะธะต ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ AD**: ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะพะฟะพััะฐะฒะปะตะฝะธะต IP-ัะตะปะตัะพะฝะพะฒ ั ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ Active Directory ะฟะพ ะฐััะธะฑััั ipPhone
- **ะะพะธัะบ ะธ ัะธะปัััะฐัะธั**: ะฒะพะทะผะพะถะฝะพััั ะฟะพะธัะบะฐ ัะตะปะตัะพะฝะพะฒ ะฟะพ ะฝะพะผะตัั, IP-ะฐะดัะตัั ะธะปะธ ะธะผะตะฝะธ ะฟะพะปัะทะพะฒะฐัะตะปั
- **ะะพะผะผะตะฝัะฐัะธะธ**: ะดะพะฑะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปััะบะธั ะบะพะผะผะตะฝัะฐัะธะตะฒ ะบ IP-ัะตะปะตัะพะฝะฐะผ ะดะปั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะน ะธะฝัะพัะผะฐัะธะธ
- **ะกัะฐััั ััััะพะนััะฒ**: ะพัะพะฑัะฐะถะตะฝะธะต ััะฐัััะฐ ะดะพัััะฟะฝะพััะธ IP-ัะตะปะตัะพะฝะพะฒ (Avail/NonQual/Unavail/Unknown)

### ะฃะปัััะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ะธะฝัะตััะตะนัะฐ
- **HTMX-ะธะฝัะตััะตะนั**: ะดะธะฝะฐะผะธัะตัะบะธะต ะพะฑะฝะพะฒะปะตะฝะธั ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ ัััะฐะฝะธัั ะดะปั ะฑะพะปะตะต ะฟะปะฐะฒะฝะพะณะพ ะฒะทะฐะธะผะพะดะตะนััะฒะธั
- **ะะฝัะตัะฐะบัะธะฒะฝัะต ัะปะตะผะตะฝัั**: ะผะพะดะฐะปัะฝัะต ะพะบะฝะฐ, ะฒะบะปะฐะดะบะธ ะธ ัะธะปัััั ะดะปั ัะดะพะฑะฝะพะณะพ ัะฟัะฐะฒะปะตะฝะธั ะดะฐะฝะฝัะผะธ
- **ะฃะปัััะตะฝะฝะฐั ะฒะฐะปะธะดะฐัะธั**: ะบะปะธะตะฝััะบะฐั ะธ ัะตัะฒะตัะฝะฐั ะฒะฐะปะธะดะฐัะธั ัะพัะผ ั ะฟะพะฝััะฝัะผะธ ัะพะพะฑัะตะฝะธัะผะธ ะพะฑ ะพัะธะฑะบะฐั
- **ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ**: ะบะพััะตะบัะฝะพะต ะพัะพะฑัะฐะถะตะฝะธะต ะฝะฐ ัะฐะทะปะธัะฝัั ััััะพะนััะฒะฐั ะธ ัะฐะทะผะตัะฐั ัะบัะฐะฝะฐ
- **ะัะฐัะธะบะธ ััะฐัะธััะธะบะธ**: ะฒะธะทัะฐะปะธะทะฐัะธั ะดะฐะฝะฝัั ัะบะฐะฝะธัะพะฒะฐะฝะธั ัะตัะธ ะธ ะฐะบัะธะฒะฝะพััะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน

## ๐ง ะขะตัะฝะพะปะพะณะธะธ

- Backend: **FastAPI**, **SQLAlchemy**, **SQLite**
- Frontend: **Jinja2 Templates**, **HTMX**, **Bootstrap**
- AD/LDAP: **ldap3**
- Remote logon check: **pywinrm**, **requests-ntlm**, **impacket**
- Reverse proxy: **Nginx**
- Runtime: **Docker Compose**
- ะ ัะพััะฐะฒะต compose ะฟัะธัััััะฒััั **Redis + Celery worker + Celery beat** (ัะพะฝะพะฒัะต ะทะฐะดะฐัะธ ะธ ัะฐัะฟะธัะฐะฝะธะต).
- **ะะฐัะธัะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ**: ัะตะฐะปะธะทะพะฒะฐะฝะฐ ะทะฐัะธัะฐ ะพั CSRF-ะฐัะฐะบ, ะฑะตะทะพะฟะฐัะฝะพะต ััะฐะฝะตะฝะธะต ะฟะฐัะพะปะตะน ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Argon2, ัะธััะพะฒะฐะฝะธะต ะบะพะฝัะธะดะตะฝัะธะฐะปัะฝัั ะดะฐะฝะฝัั ะฒ ะฑะฐะทะต ะดะฐะฝะฝัั

## ๐ ะฃััะฐะฝะพะฒะบะฐ

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Docker
- Docker Compose
- Git

### ะัััััะน ะทะฐะฟััะบ (Docker Compose)

#### 1) ะะพะดะณะพัะพะฒะบะฐ

```bash
git clone https://github.com/your-username/ad-portal.git
cd ad-portal
cp .env.example .env
mkdir -p data
# ะตัะปะธ ะบะพะฝัะตะนะฝะตั ะฝะต ะผะพะถะตั ะฟะธัะฐัั SQLite:
sudo chmod 777 data
```

ะะฐะถะฝะพ: ะฒ `docker-compose.yml` ัะบะฐะถะธัะต DNS ะฒะฐัะตะณะพ AD (ะพะฑััะฝะพ ะบะพะฝััะพะปะปะตั ะดะพะผะตะฝะฐ), ััะพะฑั ะบะพััะตะบัะฝะพ ัะตะทะพะปะฒะธะปะธัั FQDN:
```yaml
dns:
  - 192.168.66.11
```

#### 2) ะะฐะฟััะบ

```bash
docker compose up -d --build
```

#### 3) ะัะบัััั ะฒ ะฑัะฐัะทะตัะต

- `http://<IP_ัะพััะฐ>:8484/login`

ะะพัั `8484` ะทะฐะดะฐัััั ะฒ `docker-compose.yml` (ัะตัะฒะธั `nginx`).

## โ๏ธ ะะพะฝัะธะณััะฐัะธั

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (.env)

ะคะฐะนะป `.env.example` โ ัะฐะฑะปะพะฝ. ะะปััะตะฒัะต ะฟะฐัะฐะผะตััั:

- `APP_SECRET_KEY` โ **ะพะฑัะทะฐัะตะปัะฝะพ** ะดะปะธะฝะฝัะน ัะปััะฐะนะฝัะน ัะตะบัะตั.
  - ะัะฟะพะปัะทัะตััั ะดะปั ะฟะพะดะฟะธัะธ cookieโัะตััะธะธ ะธ ะดะปั ัะธััะพะฒะฐะฝะธั ะฟะฐัะพะปะตะน ะฒ ะะ.
  - ะะต ะผะตะฝัะนัะต ะบะปัั ะฟะพัะปะต ะฒะฒะพะดะฐ ะฟะฐัะพะปะตะน ะฒ ะฝะฐัััะพะนะบะฐั: ัะผะตะฝะฐ ะบะปััะฐ ัะดะตะปะฐะตั ััะฐััะต ะทะฐัะธััะพะฒะฐะฝะฝัะต ะทะฝะฐัะตะฝะธั ะฝะตัะธัะฐะตะผัะผะธ.
- `APP_COOKIE_SECURE` โ ััะฐะฒััะต `true`, ะตัะปะธ ัะฐะฑะพัะฐะตัะต ัะตัะตะท HTTPS.
- `SQLITE_PATH` โ ะฟััั ะบ SQLite (ะฒ compose ะฟะพ ัะผะพะปัะฐะฝะธั `/app/data/app.db`).
- `BOOTSTRAP_ADMIN_USER`, `BOOTSTRAP_ADMIN_PASSWORD` โ bootstrapโะฐะดะผะธะฝ ัะพะทะดะฐัััั ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต, ะตัะปะธ ะปะพะบะฐะปัะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะตัั ะฝะตั.
- `REDIS_URL` โ Redis ะดะปั Celery.

## ๐ ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะตัะฒัะน ะฒัะพะด

ะะพัะปะต ััะฐััะฐ ะธัะฟะพะปัะทัะนัะต bootstrapโะฟะพะปัะทะพะฒะฐัะตะปั ะธะท `.env` ะธ ะพัะบัะพะนัะต:
- `http://<IP_ัะพััะฐ>:8484/settings`

### ะะฐัััะพะนะบะฐ AD

ะะฐ ัััะฐะฝะธัะต ยซะะฐัััะพะนะบะธยป:
1) ะฃะบะฐะถะธัะต ะฟะฐัะฐะผะตััั AD:
   - **DC**: ะบะพัะพัะบะพะต ะธะผั, ะฝะฐะฟัะธะผะตั `DC1`
   - **ะะพะผะตะฝ**: ะฝะฐะฟัะธะผะตั `ubc.local.net`
   - **ะกะฟะพัะพะฑ ะฟะพะดะบะปััะตะฝะธั**: `LDAPS (636)` ะธะปะธ `LDAP + StartTLS (389)`
   - **Bind user**: ัะพะปัะบะพ ะธะผั ะฟะพะปัะทะพะฒะฐัะตะปั (ะฝะฐะฟัะธะผะตั `ldap_bind`)
   - **Bind password**: ะฒะฒะพะดะธััั ัะพะปัะบะพ ะฟัะธ ัะผะตะฝะต (ะตัะปะธ ะฟัััะพ โ ะฝะต ะผะตะฝัะตััั)
2) ะะฐะถะผะธัะต **ยซะัะพะฒะตัะธัั ะธ ะทะฐะณััะทะธัั ะณััะฟะฟัยป** โ ะฟัะธะปะพะถะตะฝะธะต ะฟัะพะฒะตัะธั bind ะธ ะฟะพะดััะฝะตั ะณััะฟะฟั.
3) ะัะฑะตัะธัะต:
   - ะณััะฟะฟั **ะดะปั ะฒัะพะดะฐ ะฒ ะฟัะธะปะพะถะตะฝะธะต**;
   - ะณััะฟะฟั **ะดะปั ะดะพัััะฟะฐ ะบ ะฝะฐัััะพะนะบะฐะผ**.
4) ะะตัะตะบะปััะธัะต ัะตะถะธะผ ะฐะฒัะพัะธะทะฐัะธะธ ะฝะฐ **AD** ะธ ัะพััะฐะฝะธัะต.

ะัะธะผะตัะฐะฝะธะต: ะฟัะพะฒะตัะบะฐ ยซะฒัะพะดะธั ะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะณััะฟะฟัยป ะพัะธะตะฝัะธัะพะฒะฐะฝะฐ ะฝะฐ **ะฟััะผะพะต ัะปะตะฝััะฒะพ** (ะฑะตะท ัะตะบัััะธะฒะฝะพะณะพ ะพะฑัะพะดะฐ nestedโะณััะฟะฟ).

### ะะฐัััะพะนะบะฐ ยซะัะพ ะทะฐะปะพะณะธะฝะตะฝ ะฝะฐ ัะพััะตยป

ะ ยซะะฐัััะพะนะบะฐัยป ะทะฐะฟะพะปะฝะธัะต:
- **Host query user** โ ััััะบะฐ ะดะปั ะพะฟัะพัะฐ WinRM/WMI/SMB (ัะตะบะพะผะตะฝะดัะตััั `DOMAIN\\user`).
- **Host query password** โ ะฟะฐัะพะปั (ะตัะปะธ ะฟัััะพ โ ะฝะต ะผะตะฝัะตััั).
- **Timeout ะฝะฐ ัะฟะพัะพะฑ (ัะตะบ.)** โ ะพะณัะฐะฝะธัะตะฝะธะต ะฒัะตะผะตะฝะธ ะฝะฐ ะบะฐะถะดัะน ัะฟะพัะพะฑ (5โฆ300).

ะะฐะถะฝะพ: bindโััััะบะฐ AD ะฝะต ะธัะฟะพะปัะทัะตััั ะดะปั ะพะฟัะพัะฐ ัะพััะพะฒ. ะญัะพ ะพัะดะตะปัะฝะฐั ััััะบะฐ.

## ๐๏ธ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
ad_portal/
โโโ app/
โ   โโโ __init__.py
โ   โโโ ad/
โ   โ   โโโ __init__.py
โ   โ   โโโ client.py
โ   โ   โโโ models.py
โ   โ   โโโ utils.py
โ   โโโ ad_utils.py
โ   โโโ bootstrap.py
โ   โโโ celery_app.py
โ   โโโ crypto.py
โ   โโโ db.py
โ   โโโ deps.py
โ   โโโ env_settings.py
โ   โโโ host_query/
โ   โ   โโโ __init__.py
โ   โ   โโโ api.py
โ   โ   โโโ credentials.py
โ   โ   โโโ methods.py
โ   โ   โโโ models.py
โ   โ   โโโ targets.py
โ   โ   โโโ utils.py
โ   โโโ main.py
โ   โโโ mappings.py
โ   โโโ models.py
โ   โโโ net_scan.py
โ   โโโ presence.py
โ   โโโ repo.py
โ   โโโ routers/
โ   โ   โโโ __init__.py
โ   โ   โโโ ad_management.py
โ   โ   โโโ auth.py
โ   โ   โโโ health.py
โ   โ   โโโ hosts.py
โ   โ   โโโ index.py
โ   โ   โโโ ip_phones.py
โ   โ   โโโ presence.py
โ   โ   โโโ settings.py
โ   โ   โโโ users.py
โ   โโโ schema.py
โ   โโโ security.py
โ   โโโ services/
โ   โ   โโโ __init__.py
โ   โ   โโโ auth/
โ   โ   โโโ settings/
โ   โ   โโโ ad.py
โ   โ   โโโ audit.py
โ   โ   โโโ groups.py
โ   โ   โโโ ip_phones.py
โ   โ   โโโ local_auth.py
โ   โโโ session.py
โ   โโโ static/
โ   โ   โโโ app.css
โ   โ   โโโ theme.js
โ   โโโ tasks.py
โ   โโโ templates/
โ   โ   โโโ ad_management_create_group_modal.html
โ   โ   โโโ ad_management_create_user_step1.html
โ   โ   โโโ ad_management_create_user_step2.html
โ   โ   โโโ ad_management_create_user_step3.html
โ   โ   โโโ ad_management_create_user_step4.html
โ   โ   โโโ ad_management_delete_group_modal.html
โ   โ   โโโ ad_management_delete_user_modal.html
โ   โ   โโโ ad_management_fragment.html
โ   โ   โโโ ad_management_group_edit.html
โ   โ   โโโ ad_management_group_members.html
โ   โ   โโโ ad_management_group_search_members.html
โ   โ   โโโ ad_management_groups_tab.html
โ   โ   โโโ ad_management_groups.html
โ   โ   โโโ ad_management_search_users.html
โ   โ   โโโ ad_management_user_edit_groups_search.html
โ   โ   โโโ ad_management_user_edit_groups.html
โ   โ   โโโ ad_management_user_edit.html
โ   โ   โโโ ad_management_users_tab.html
โ   โ   โโโ ad_management_users.html
โ   โ   โโโ ad_management_wizard_groups_search.html
โ   โ   โโโ ad_management.html
โ   โ   โโโ base_app.html
โ   โ   โโโ base_public.html
โ   โ   โโโ host_logon_results.html
โ   โ   โโโ index.html
โ   โ   โโโ ip_phones_fragment.html
โ   โ   โโโ login.html
โ   โ   โโโ partials/
โ   โ   โ   โโโ ad_disabled_users.html
โ   โ   โ   โโโ ad_group_members.html
โ   โ   โ   โโโ ad_groups_list.html
โ   โ   โ   โโโ ad_no_pin_users.html
โ   โ   โ   โโโ htmx_alert.html
โ   โ   โ   โโโ ip_phone_comment_cell.html
โ   โ   โ   โโโ ip_phones_results.html
โ   โ   โ   โโโ main_tabs.html
โ   โ   โ   โโโ net_scan_poll.html
โ   โ   โ   โโโ session_card.html
โ   โ   โ   โโโ settings_export_import.html
โ   โ   โ   โโโ settings_validate_tools.html
โ   โ   โ   โโโ user_modal_script.html
โ   โ   โ   โโโ user_modal.html
โ   โ   โโโ presence_results.html
โ   โ   โโโ settings_groups.html
โ   โ   โโโ settings_init.html
โ   โ   โโโ settings.html
โ   โ   โโโ user_details.html
โ   โ   โโโ user_view_modal.html
โ   โ   โโโ user_view.html
โ   โ   โโโ users_results.html
โ   โโโ timezone_utils.py
โ   โโโ utils/
โ   โ   โโโ __init__.py
โ   โ   โโโ datetime_fmt.py
โ   โ   โโโ dn.py
โ   โ   โโโ net.py
โ   โ   โโโ numbers.py
โ   โ   โโโ tcp_probe.py
โ   โโโ viewmodels/
โ   โ   โโโ user_details.py
โ   โโโ webui.py
โโโ docker-compose.yml
โโโ Dockerfile
โโโ nginx/
โโโ README.md
โโโ requirements.txt
โโโ .gitignore
```

## ๐ค ะะบะปะฐะด ะฒ ัะฐะทะฒะธัะธะต

ะั ะฟัะธะฒะตัััะฒัะตะผ ะฒะฐั ะฒะบะปะฐะด ะฒ ัะฐะทะฒะธัะธะต ะฟัะพะตะบัะฐ! ะงัะพะฑั ะฒะฝะตััะธ ัะฒะพะน ะฒะบะปะฐะด:

1. ะคะพัะบะฝะธัะต ัะตะฟะพะทะธัะพัะธะน
2. ะกะพะทะดะฐะนัะต ะฒะตัะบั ะดะปั ะฝะพะฒะพะน ััะฝะบัะธะธ (`git checkout -b feature/amazing-feature`)
3. ะะฐัะธะบัะธััะนัะต ะธะทะผะตะฝะตะฝะธั (`git commit -m 'Add some amazing feature'`)
4. ะะฐะฟััััะต ะฒะตัะบั (`git push origin feature/amazing-feature`)
5. ะัะบัะพะนัะต Pull Request

### ะกัะธะปั ะบะพะดะธัะพะฒะฐะฝะธั

ะั ะฟัะธะดะตัะถะธะฒะฐะตะผัั ััะฐะฝะดะฐััะพะฒ PEP 8 ะดะปั Python ะบะพะดะฐ.

## ๐ ะะตะทะพะฟะฐัะฝะพััั

ะัะปะธ ะฒั ะพะฑะฝะฐััะถะธะปะธ ััะทะฒะธะผะพััั ะฑะตะทะพะฟะฐัะฝะพััะธ, ะฟะพะถะฐะปัะนััะฐ, ัะฒัะถะธัะตัั ั ะฝะฐะผะธ ะฝะฐะฟััะผัั ะฟะพ ัะปะตะบััะพะฝะฝะพะน ะฟะพััะต, ะฐ ะฝะต ัะพะทะดะฐะฒะฐะนัะต ะฟัะฑะปะธัะฝัะน Issue.

## ๐ ะะธัะตะฝะทะธั

ะญัะพั ะฟัะพะตะบั ัะฐัะฟัะพัััะฐะฝัะตััั ะฟะพะด ะปะธัะตะฝะทะธะตะน MIT. ะะพะดัะพะฑะฝะพััะธ ัะผ. ะฒ ัะฐะนะปะต [LICENSE](LICENSE).

## ๐ ะะพะฝัะฐะบัั

- ะะฒัะพั: ะะฝะดัะตะน ะะฐะนะดะตะฝะบะพ
- Email: andrey.lw@gmail.com

## ๐ ะะปะฐะณะพะดะฐัะฝะพััะธ

ะกะฟะฐัะธะฑะพ ะฒัะตะผ, ะบัะพ ะฒะฝะตั ะฒะบะปะฐะด ะฒ ัะฐะทะฒะธัะธะต ััะพะณะพ ะฟัะพะตะบัะฐ!

## ๐ค ะะฐะทัะฐะฑะพัะบะฐ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ะะ

ะญัะพั ะฟัะพะตะบั ะฑัะป ัะฐััะธัะฝะพ ัะฐะทัะฐะฑะพัะฐะฝ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ ัะพะฒัะตะผะตะฝะฝัั ัะทัะบะพะฒัั ะผะพะดะตะปะตะน:

<div align="center">
  
[![ChatGPT](https://img.shields.io/badge/-ChatGPT-10A1D4?style=for-the-badge&logo=openai&logoColor=white)](https://chat.openai.com/)
[![Qwen](https://img.shields.io/badge/-Qwen-orange?style=for-the-badge&logo=openai&logoColor=white)](https://www.aliyun.com/product/dashscope)
[![Claude](https://img.shields.io/badge/-Claude-8A2BE2?style=for-the-badge&logo=anthropic&logoColor=white)](https://claude.ai)

</div>

ะัะพะตะบั ะฑัะป ัะฐะทัะฐะฑะพัะฐะฝ ั ะฟัะธะผะตะฝะตะฝะธะตะผ ะธัะบััััะฒะตะฝะฝะพะณะพ ะธะฝัะตะปะปะตะบัะฐ, ะฒะบะปััะฐั ChatGPT (Codex), Qwen CLI ะธ Claude-Code CLI, ะดะปั ััะบะพัะตะฝะธั ะฟัะพัะตััะฐ ัะฐะทัะฐะฑะพัะบะธ, ัะตัะฐะบัะพัะธะฝะณะฐ ะบะพะดะฐ ะธ ะดะพะบัะผะตะฝัะธัะพะฒะฐะฝะธั.

---

ะัะปะธ ะฒั ะฝะฐัะปะธ ััะพั ะฟัะพะตะบั ะฟะพะปะตะทะฝัะผ, ะฟะพััะฐะฒััะต โญ ะทะฒะตะทะดั!