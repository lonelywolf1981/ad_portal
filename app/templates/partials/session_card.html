<div class="card shadow-sm">
  <div class="card-body">
    <h1 class="h6 mb-2">Сеанс</h1>

    <div class="row small">
      <div class="col-md-6">
        {# Backward/forward compatibility:
           - old builds stored username in key "u"
           - current builds store username in key "username" #}
        <div class="text-secondary">Пользователь: <strong>{{ user.get("username") or user.get("u", "") }}</strong></div>
        <div class="text-secondary">Тип: <strong>{{ user.get("auth", "") }}</strong></div>
        <div class="text-secondary">Доступ к настройкам: <strong>{{ "Да" if user.get("settings") else "Нет" }}</strong></div>
      </div>
      <div class="col-md-6">
        {# Backward/forward compatibility:
           - old builds stored display name in key "dn"
           - current builds store display name in key "display_name" #}
        <div class="text-secondary">Отображаемое имя: <strong>{{ user.get("display_name") or user.get("dn", "") }}</strong></div>
      </div>
    </div>

    <div class="mt-2 pt-2 border-top small text-secondary">
      <div class="mb-1">Статус: {% if net_scan_is_running %}<span class="badge text-bg-info">Выполняется…</span>{% else %}<span class="badge text-bg-secondary">Ожидание</span>{% endif %}</div>
      <div>Последний запуск: <strong>{{ net_scan_last_run if net_scan_last_run else "—" }}</strong></div>
      <div>Результат: {% if net_scan_last_summary %}{{ net_scan_last_summary }}{% else %}—{% endif %}</div>
    </div>
  </div>
</div>
